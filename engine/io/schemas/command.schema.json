{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://cantanor.local/schema/command.schema.json",
  "title": "Command",
  "type": "object",
  "required": ["type", "actor"],
  "properties": {
    "type": {
      "type": "string",
      "enum": [
        "move",
        "strike",
        "end_turn",
        "save_damage",
        "area_save_damage",
        "apply_effect",
        "trigger_hazard_source",
        "run_hazard_routine",
        "set_flag",
        "spawn_unit",
        "cast_spell",
        "use_feat",
        "use_item",
        "interact"
      ]
    },
    "actor": {"type": "string"},
    "content_entry_id": {"type": "string"},
    "x": {"type": "integer"},
    "y": {"type": "integer"},
    "target": {"type": "string"},
    "dc": {"type": "integer"},
    "save_type": {"type": "string", "enum": ["Fortitude", "Reflex", "Will"]},
    "damage": {"type": "string"},
    "damage_type": {"type": "string"},
    "damage_bypass": {
      "type": "array",
      "items": {"type": "string"}
    },
    "mode": {"type": "string"},
    "spell_id": {"type": "string"},
    "feat_id": {"type": "string"},
    "item_id": {"type": "string"},
    "interact_id": {"type": "string"},
    "action_cost": {"type": "integer", "minimum": 1},
    "effect_kind": {"type": "string"},
    "payload": {"type": "object"},
    "duration_rounds": {"type": ["integer", "null"]},
    "tick_timing": {"type": ["string", "null"], "enum": ["turn_start", "turn_end", null]},
    "center_x": {"type": ["integer", "null"]},
    "center_y": {"type": ["integer", "null"]},
    "radius_feet": {"type": "integer"},
    "include_actor": {"type": "boolean"},
    "hazard_id": {"type": "string"},
    "source_name": {"type": "string"},
    "source_type": {"type": "string"},
    "model_path": {"type": ["string", "null"]},
    "target_policy": {
      "type": "string",
      "enum": ["as_configured", "explicit", "nearest_enemy", "nearest_enemy_area_center", "all_enemies"]
    },
    "flag": {"type": "string"},
    "value": {"type": "boolean"},
    "unit": {"type": "object"},
    "placement_policy": {"type": "string", "enum": ["exact", "nearest_open"]},
    "spend_action": {"type": "boolean"}
  }
}
