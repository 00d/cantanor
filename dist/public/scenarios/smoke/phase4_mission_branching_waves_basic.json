{
  "battle_id": "phase4_mission_branching_waves_basic",
  "seed": 710,
  "map": {
    "width": 8,
    "height": 8,
    "blocked": []
  },
  "flags": {
    "alarm": false,
    "route_high": false,
    "route_low": false,
    "wave_high_spawned": false,
    "wave_low_spawned": false
  },
  "objectives": [
    {
      "id": "low_wave_spawned",
      "type": "flag_set",
      "flag": "wave_low_spawned",
      "value": true,
      "result": "victory"
    }
  ],
  "units": [
    {
      "id": "hazard_core",
      "team": "hazard",
      "hp": 999,
      "position": [2, 2],
      "initiative": 20,
      "attack_mod": 0,
      "ac": 10,
      "damage": "1d1",
      "fortitude": 0,
      "reflex": 0,
      "will": 0
    },
    {
      "id": "pc_1",
      "team": "pc",
      "hp": 30,
      "position": [5, 5],
      "initiative": 10,
      "attack_mod": 7,
      "ac": 17,
      "damage": "1d8+3",
      "fortitude": 6,
      "reflex": 5,
      "will": 4
    }
  ],
  "mission_events": [
    {
      "id": "branch_route",
      "trigger": "round_start",
      "round": 2,
      "once": true,
      "if_flag": "alarm",
      "if_flag_value": true,
      "then_commands": [
        {
          "type": "set_flag",
          "flag": "route_high",
          "value": true
        }
      ],
      "else_commands": [
        {
          "type": "set_flag",
          "flag": "route_low",
          "value": true
        }
      ]
    }
  ],
  "reinforcement_waves": [
    {
      "id": "wave_high",
      "trigger": "round_start",
      "round": 2,
      "enabled_flag": "route_high",
      "set_flag": "wave_high_spawned",
      "set_flag_value": true,
      "units": [
        {
          "id": "hazard_wave_high",
          "team": "hazard",
          "hp": 16,
          "position": [1, 2],
          "initiative": 12,
          "attack_mod": 6,
          "ac": 15,
          "damage": "1d8+2",
          "fortitude": 5,
          "reflex": 4,
          "will": 4
        }
      ]
    },
    {
      "id": "wave_low",
      "trigger": "round_start",
      "round": 2,
      "enabled_flag": "route_low",
      "set_flag": "wave_low_spawned",
      "set_flag_value": true,
      "units": [
        {
          "id": "hazard_wave_low",
          "team": "hazard",
          "hp": 16,
          "position": [1, 3],
          "initiative": 12,
          "attack_mod": 6,
          "ac": 15,
          "damage": "1d8+2",
          "fortitude": 5,
          "reflex": 4,
          "will": 4
        }
      ]
    }
  ],
  "commands": [
    {
      "type": "end_turn",
      "actor": "hazard_core"
    },
    {
      "type": "end_turn",
      "actor": "pc_1"
    }
  ]
}
